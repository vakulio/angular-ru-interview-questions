## Как защитить компонент активируемый через роутер?

Когда речь идет о защите компонента, активируемого через роутер в Angular, мы можем использовать механизмы маршрутизации и роут-гварды. Роут-гварды позволяют нам проверить условия перед активацией компонента и принять решение о том, разрешить ли доступ к компоненту или перенаправить пользователя на другую страницу.

Давайте рассмотрим шаги, необходимые для защиты компонента активируемого через роутер:

Шаг 1: Создание роут-гварда
Сначала создадим роут-гвард, который будет выполнять проверку доступа к компоненту.

```typescript
import { Injectable } from '@angular/core';
import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class AuthGuard implements CanActivate {
  canActivate(
    next: ActivatedRouteSnapshot,
    state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {
    // Проверка условия доступа к компоненту
    const isLoggedIn = /* Проверить, авторизован ли пользователь */;

    if (isLoggedIn) {
      return true; // Разрешить доступ к компоненту
    } else {
      // Перенаправить на другую страницу
      return this.router.parseUrl('/login');
    }
  }

  constructor(private router: Router) { }
}
```

В этом примере мы создали роут-гвард `AuthGuard`, который реализует интерфейс `CanActivate`. Метод `canActivate` выполняет проверку условия доступа к компоненту. Если пользователь авторизован, возвращается значение `true`, что разрешает доступ к компоненту. В противном случае, мы используем `this.router.parseUrl()` для перенаправления пользователя на страницу входа.

Шаг 2: Настройка роутинга
Теперь, когда у нас есть роут-гвард, мы должны применить его к нужному маршруту.

```typescript
import { NgModule } from '@angular/core'
import { RouterModule, Routes } from '@angular/router'
import { HomeComponent } from './home.component'
import { AuthGuard } from './auth.guard'

const routes: Routes = [
	{
		path: 'home',
		component: HomeComponent,
		canActivate: [AuthGuard] // Применение роут-гварда к компоненту
	}
]

@NgModule({
	imports: [RouterModule.forRoot(routes)],
	exports: [RouterModule]
})
export class AppRoutingModule {}
```

В этом примере мы применили роут-гвард `AuthGuard` к компоненту `HomeComponent`, указав его в свойстве `canActivate` для маршрута. Это гарантирует, что роут-гвард будет проверять доступ перед активацией компонента.

Теперь, при попытке перейти по маршруту `/home`, роут-гвард будет выполнять проверку доступа и принимать решение о дальнейших действиях.

Это был общий пример защиты компонента активируемого через роутер в Angular с использованием роут-гвардов. Конкретные условия доступа и перенаправления могут быть адаптированы под ваши требования и логику приложения.