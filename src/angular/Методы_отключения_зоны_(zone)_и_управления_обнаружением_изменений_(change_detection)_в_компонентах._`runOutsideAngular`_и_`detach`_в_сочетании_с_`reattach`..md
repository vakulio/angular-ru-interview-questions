## Методы отключения зоны (zone) и управления обнаружением изменений (change detection) в компонентах. `runOutsideAngular` и `detach` в сочетании с `reattach`.

В Angular у нас есть несколько методов для отключения зоны (zone) и управления обнаружением изменений (change detection) в компонентах. Рассмотрим два из них: `runOutsideAngular` и `detach` в сочетании с `reattach`.

1. Метод `runOutsideAngular` позволяет выполнять код за пределами зоны Angular. Это полезно, когда мы хотим выполнить операции, которые не требуют обнаружения изменений и могут вызвать лишние циклы обнаружения изменений в Angular.

Вот пример использования `runOutsideAngular`:

```typescript
import { Component, NgZone } from '@angular/core'

@Component({
	selector: 'app-example',
	template: ` <button (click)="runOutsideZone()">Выполнить за пределами зоны</button> `
})
export class ExampleComponent {
	constructor(private ngZone: NgZone) {}

	runOutsideZone() {
		this.ngZone.runOutsideAngular(() => {
			// Код, который будет выполнен за пределами зоны Angular
			// Изменения не будут обнаруживаться и применяться автоматически
			// ...
		})
	}
}
```

В приведенном примере, когда пользователь нажимает на кнопку "Выполнить за пределами зоны", код внутри `runOutsideAngular` будет выполнен без обнаружения изменений, что позволит нам избежать лишних циклов обнаружения изменений и увеличит производительность в случаях, когда это необходимо.

2. Методы `detach` и `reattach` позволяют временно отключать и затем восстановить обнаружение изменений в компоненте. Это полезно, когда мы хотим управлять моментами обнаружения изменений для оптимизации производительности.

Вот пример использования `detach` и `reattach`:

```typescript
import { Component, ChangeDetectorRef } from '@angular/core'

@Component({
	selector: 'app-example',
	template: ` <button (click)="toggleDetection()">Переключить обнаружение изменений</button> `
})
export class ExampleComponent {
	private detached = false

	constructor(private cdr: ChangeDetectorRef) {}

	toggleDetection() {
		if (this.detached) {
			this.cdr.reattach() // Восстановление обнаружения изменений
			this.detached = false
		} else {
			this.cdr.detach() // Отключение обнаружения изменений
			this.detached = true
		}
	}
}
```

В этом примере, при нажатии на кнопку "Переключить обнаружение изменений" мы переключаемся между отключенным и включенным режимами обнаружения изменений. Когда обнаружение изменений отключено с помощью `detach`, Angular не будет автоматически обнаруживать и применять изменения в компоненте. Когда мы снова включаем обнаружение изменений с помощью `reattach`, Angular возобновляет обнаружение изменений и применяет все накопленные изменения.

Использование методов `runOutsideAngular`, `detach` и `reattach` дает нам гибкость в управлении обнаружением изменений и помогает оптимизировать производительность наших Angular приложений, особенно в случаях, когда мы выполняем операции, которые не требуют обнаружения изменений или когда мы хотим временно отключить обнаружение изменений для определенных частей кода.